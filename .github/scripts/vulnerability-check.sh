#!/bin/bash

# Verificar si el token de GitHub está presente
if [[ -z "$GH_TOKEN" ]]; then
  echo "ERROR: El token de GitHub no está establecido."
  exit 1
fi

# Lista de repositorios a verificar
REPOS=("centralcordoba/githubworkflowA" "centralcordoba/MarvelAngular")

# Loop a través de cada repositorio para verificar vulnerabilidades
for REPO in "${REPOS[@]}"; do
  # Obtener vulnerabilidades usando la API de GitHub
  VULN_DATA=$(curl -s -H "Authorization: token $GH_TOKEN" \
                   -H "Accept: application/vnd.github.v3+json" \
                   "https://api.github.com/repos/$REPO/vulnerability-alerts")

  # Procesar los datos - Esto debe ajustarse a tus necesidades
  # Por ejemplo, podrías verificar si "$VULN_DATA" contiene cierta información y actuar en consecuencia
  echo "Vulnerabilities for $REPO: $VULN_DATA"  # Este es un ejemplo muy simple
done
